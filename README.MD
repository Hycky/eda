# üß† Guia de An√°lise Explorat√≥ria com YData Profiling

Este guia ensina como:

- Instalar o YData Profiling (ex-pandas-profiling)
- Ativar ambientes virtuais com **Poetry** ou **venv**
- Rodar o `ProfileReport`
- Aplicar transforma√ß√µes comuns em colunas para melhorar a an√°lise

---

## üí° Pr√© requisitos:

### üêç Python 3.11 ou superior

se usa pyenv, basta o comando:

```bash
pyenv install 3.11.8
pyenv local 3.11.8
```

## ‚úÖ Instala√ß√£o

### üîπ Usando `venv`

**1. Criar ambiente virtual:**

#### Windows:

```bash
python -m venv .venv
.venv\Scripts\activate
```

#### Mac/Linux:

```bash
python3 -m venv .venv
source .venv/bin/activate
```

**2. Instalar depend√™ncias via `requirements.txt`:**

```bash
pip install -r requirements.txt
```

---

### üîπ Usando `poetry`

**1. Criar projeto e instalar depend√™ncias:**

```bash
poetry install
```

**2. Ativar o ambiente virtual:**

```bash
poetry shell
```

---

## üöÄ Como rodar o YData Profiling

```bash
python src/main.py
```

---

## üõ†Ô∏è Transforma√ß√µes recomendadas por tipo de coluna

```python
# üîπ 1. Convers√£o para string (identificadores, c√≥digos)
df["COLUNA"] = df["COLUNA"].astype(str)

# üîπ 2. Convers√£o para datetime (datas, timestamps)
df["COLUNA"] = pd.to_datetime(df["COLUNA"], errors="coerce")

# üîπ 3. Remover espa√ßos em branco extras
df["COLUNA"] = df["COLUNA"].astype(str).str.strip()

# üîπ 4. Texto para mai√∫sculas/min√∫sculas (normaliza√ß√£o)
df["COLUNA"] = df["COLUNA"].str.upper()
df["COLUNA"] = df["COLUNA"].str.lower()

# üîπ 5. Preenchimento de valores ausentes com string
df["COLUNA"] = df["COLUNA"].fillna("DESCONHECIDO")

# üîπ 6. Preenchimento de valores ausentes com datas
df["COLUNA"] = df["COLUNA"].fillna(pd.Timestamp("1900-01-01"))

# üîπ 7. Convers√£o para booleano (sim/n√£o, ativo/inativo)
df["COLUNA"] = df["COLUNA"].str.strip().str.upper().map({"SIM": True, "N√ÉO": False, "NAO": False})

# üîπ 8. Mapeamento de categorias padronizadas
mapa = {"M": "Masculino", "F": "Feminino", "O": "Outro"}
df["COLUNA"] = df["COLUNA"].map(mapa).fillna("Desconhecido")

# üîπ 9. C√°lculo de idade (a partir de data de nascimento)
df["IDADE"] = (pd.Timestamp.today() - df["COLUNA"]).dt.days // 365

# üîπ 10. Marcar idosos com base na idade
df["IDOSO"] = df["IDADE"].apply(lambda x: "SIM" if pd.notna(x) and x >= 60 else "N√ÉO")

# üîπ 11. Extra√ß√£o de ano, m√™s e dia a partir de uma data
df["COLUNA_ANO"] = df["COLUNA"].dt.year
df["COLUNA_MES"] = df["COLUNA"].dt.month
df["COLUNA_DIA"] = df["COLUNA"].dt.day

# üîπ 12. Remover acentos (normaliza√ß√£o avan√ßada de texto)
import unicodedata
df["COLUNA"] = df["COLUNA"].apply(lambda x: unicodedata.normalize('NFKD', str(x)).encode('ascii', errors='ignore').decode('utf-8'))

# üîπ 13. Criar coluna condicional bin√°ria (ex: idade >= 18)
df["ADULTO"] = df["IDADE"].apply(lambda x: "SIM" if pd.notna(x) and x >= 18 else "N√ÉO")
```

---
